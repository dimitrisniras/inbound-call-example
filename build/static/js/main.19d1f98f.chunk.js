(this.webpackJsonpchathack=this.webpackJsonpchathack||[]).push([[0],{137:function(e,n,t){e.exports=t(213)},142:function(e,n,t){},167:function(e,n){},211:function(e,n,t){},213:function(e,n,t){"use strict";t.r(n);var a,o,r,l,i,c,s,d,m=t(0),u=t.n(m),p=t(19),g=t.n(p),f=(t(142),t(129)),h=t(14),b=t.n(h),v=t(120),x=t(34),E=t(23),y=t(38),w=t(10),j=t(24),k=t(121),O=new(t.n(k).a)({debug:!1}),C=t(233),N=t(234),B=t(235),A=t(243),I=t(237),S=t(238),J=t(239),z=t(127),H=t.n(z),L=t(231),_=t(232),P=j.a.div(a||(a=Object(E.a)(["\n  height: calc(100% - 56px);\n  overflow-y: overlay;\n"]))),R=(Object(j.a)(L.a)(o||(o=Object(E.a)(["\n  padding: 0 !important;\n"]))),Object(j.a)(_.a)(r||(r=Object(E.a)(["\n  height: 76px;\n  padding: 0 15px;\n  display: flex;\n"]))),j.a.img(l||(l=Object(E.a)(["\n  height: 50px;\n  width: 50px;\n  object-fit: cover;\n  border-radius: 50%;\n"]))),j.a.div(i||(i=Object(E.a)(["\n  width: calc(100% - 60px);\n  height: 46px;\n  padding: 15px 0;\n  margin-left: 10px;\n  border-bottom: 0.5px solid silver;\n  position: relative;\n"]))),j.a.div(c||(c=Object(E.a)(["\n  margin-top: 5px;\n"]))),j.a.div(s||(s=Object(E.a)(["\n  color: gray;\n  font-size: 15px;\n  margin-top: 5px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"]))),j.a.div(d||(d=Object(E.a)(["\n  position: absolute;\n  color: gray;\n  top: 20px;\n  right: 0;\n  font-size: 13px;\n"]))),Object(C.a)((function(e){return{root:{gridColumn:1,backgroundColor:e.palette.background.paper},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"10%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,paddingLeft:"15px",paddingRight:"15px"},footer:{position:"fixed",left:0,bottom:0,width:"100%","text-align":"left","border-style":"solid","border-color":"grey","border-width":"medium"},clearButton:{width:"100%"},header:{position:"fixed",right:5,top:5,width:"30%","text-align":"center","border-style":"solid","border-color":"grey","border-width":"medium"},answerButton:{width:"48%","background-color":"green"},rejectButton:{width:"48%","background-color":"red"},hangupButton:{width:"100%","background-color":"red"},span:{"margin-left":"2%"}}}))),T=function(e){var n=e.nexmoApp,t=e.events,a=e.setEvents,o=e.incomingCall,r=R();return n.me?u.a.createElement(P,null,u.a.createElement(N.a,{variant:"h4",gutterBottom:!0},n.me?"Hello ".concat(n.me.application.me.name):u.a.createElement(y.b,{to:"/"},"Login")),o&&"answered"!==o.status?u.a.createElement("div",{className:r.header},u.a.createElement(B.a,{onClick:function(){return o.answer()},className:r.answerButton},"Answer Call"),u.a.createElement("span",{className:r.span}),u.a.createElement(B.a,{onClick:function(){return o.reject()},className:r.rejectButton},"Reject Call")):u.a.createElement("div",null),o&&"answered"===o.status?u.a.createElement("div",{className:r.header},u.a.createElement(B.a,{onClick:function(){return o.hangUp()},className:r.hangupButton},"Hangup Call")):u.a.createElement("div",null),t.map((function(e){var n,t,a,o,l;return u.a.createElement(A.a,{key:e.id+e.cid},u.a.createElement(I.a,{expandIcon:u.a.createElement(H.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},u.a.createElement(N.a,{className:r.heading},e.type),u.a.createElement(N.a,{className:r.secondaryHeading},"From: ",e.from),u.a.createElement(S.a,{orientation:"vertical",flexItem:!0}),u.a.createElement(N.a,{className:r.secondaryHeading},"Display name:"," ",null!==(n=null===e||void 0===e||null===(t=e._embedded)||void 0===t||null===(a=t.from_user)||void 0===a?void 0:a.display_name)&&void 0!==n?n:null===e||void 0===e||null===(o=e._embedded)||void 0===o||null===(l=o.from_user)||void 0===l?void 0:l.name)),u.a.createElement(J.a,null,u.a.createElement(N.a,null,"Body: ".concat(JSON.stringify(e))," ")))})),u.a.createElement("div",{className:r.footer},u.a.createElement(B.a,{onClick:function(){return a([])},className:r.clearButton},"Clear Events"))):u.a.createElement(w.a,{to:"/"})},D=t(240),M=t(242),W=t(236),F=t(244),U=t(215),$=t(241),q=t(128),G=t.n(q),K=Object(C.a)((function(e){return{alignItemsAndJustifyContent:{display:"flex","flex-direction":"column",alignItems:"center",justifyContent:"center","margin-top":"-78px",height:"100vh"},linearProgress:{height:"5px",width:"200px",top:"50%",left:"50%",position:"absolute","margin-left":"-100px"},root:{gridColumn:2,backgroundColor:e.palette.background.paper},sentMessageComponent:{"align-self":"flex-end",display:"flex"},box:{display:"flex",height:"100vh","flex-direction":"column","background-color":"#f6f0d791"},link:{"margin-top":"15px",display:"block"},conversations:{overflow:"hidden"},messagesEndDiv:{display:"inline-block",float:"left"},username:{padding:"5px 7px"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},topnav:{"background-color":"#333",overflow:"hidden"},navItem:{float:"left",color:"#f2f2f2","text-align":"center",padding:"14px 16px","text-decoration":"none","font-size":"17px"}}}));var Q,V=function(e){var n=e.nexmoApp,t=e.setNexmoApp,a=e.setIncomingCall,o=K(),r=Object(m.useState)(!1),l=Object(x.a)(r,2),i=l[0],c=l[1],s=Object(m.useState)(""),d=Object(x.a)(s,2),p=d[0],g=d[1];return n.me?u.a.createElement(w.a,{to:"/events"}):u.a.createElement(D.a,null,i?null:u.a.createElement(M.a,{className:o.alignItemsAndJustifyContent},u.a.createElement("h1",null,"Please, Login"),u.a.createElement(W.a,{component:"form",className:o.root},u.a.createElement(F.a,{className:o.input,placeholder:"Login Token",inputProps:{"aria-label":"login token"},onChange:function(e){g(e.target.value)}}),u.a.createElement(U.a,{color:"primary",type:"submit",className:o.iconButton,"aria-label":"directions",onClick:function(){c(!0),n.login(p).then((function(e){c(!1),function(e){e.on("member:call",(function(n,t){console.log("Incoming Call"),console.log(t),a(t),t.conversation.on("member:left",t.conversation.id,(function(n,t){n.userId===e.me.id&&(console.log("Call hangup"),a(void 0))}))}))}(e),window.nexmoApp=e,t(e)}))}},u.a.createElement(G.a,null)))),i?u.a.createElement(M.a,{className:o.alignItemsAndJustifyContent},u.a.createElement($.a,{className:o.linearProgress})):null)},X=(t(211),j.a.div(Q||(Q=Object(E.a)(["\n  height: 100vh;\n"]))));var Y=function(){var e=Object(m.useState)(O),n=Object(x.a)(e,2),t=n[0],a=n[1],o=Object(m.useState)([]),r=Object(x.a)(o,2),l=r[0],i=r[1],c=Object(m.useState)(void 0),s=Object(x.a)(c,2),d=s[0],p=s[1],g=function(e){var n=Object(m.useState)(null),t=Object(x.a)(n,2),a=t[0],o=t[1];return Object(m.useEffect)((function(){var n,t;(null===e||void 0===e||null===(n=e.session)||void 0===n||null===(t=n.connection)||void 0===t?void 0:t.io)&&e.session.connection.io.on("packet",function(){var e=Object(v.a)(b.a.mark((function e(n){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2===n.type){e.next=2;break}return e.abrupt("return");case 2:if("echo"!==n.data[0]){e.next=4;break}return e.abrupt("return");case 4:(t=n.data[1]).type=n.data[0],o(t);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())})),a}(t);return Object(m.useEffect)((function(){var e;(e=g)&&i((function(n){return[].concat(Object(f.a)(n),[e])}))}),[g]),u.a.createElement(y.a,null,u.a.createElement(X,null,u.a.createElement(w.d,null,u.a.createElement(w.b,{path:"/login"},u.a.createElement(V,{nexmoApp:t,setNexmoApp:a,setIncomingCall:p})),u.a.createElement(w.b,{path:"/events"},u.a.createElement(T,{nexmoApp:t,events:l,setEvents:i,incomingCall:d})),u.a.createElement(w.b,{path:"/"},u.a.createElement(V,{nexmoApp:t,setNexmoApp:a,setIncomingCall:p})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));g.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[137,1,2]]]);
//# sourceMappingURL=main.19d1f98f.chunk.js.map