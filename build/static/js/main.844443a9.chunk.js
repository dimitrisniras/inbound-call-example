(this.webpackJsonpchathack=this.webpackJsonpchathack||[]).push([[0],{135:function(e,t,n){e.exports=n(211)},140:function(e,t,n){},165:function(e,t){},209:function(e,t,n){},211:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),l=n(22),c=n.n(l),i=(n(140),n(126)),s=n(14),u=n.n(s),d=n(117),m=n(32),p=n(59),f=n(36),g=n(10),v=n(60),h=n(118),b=new(n.n(h).a)({debug:!1}),E=n(228),x=n(229),y=n(230),k=n(238),w=n(232),j=n(233),C=n(234),N=n(124),O=n.n(N),B=v.a.div(a||(a=Object(p.a)(["\n  height: calc(100% - 56px);\n  overflow-y: overlay;\n"]))),A=Object(E.a)((function(e){return{root:{gridColumn:1,backgroundColor:e.palette.background.paper},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"10%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,paddingLeft:"15px",paddingRight:"15px"},footer:{position:"fixed",left:0,bottom:0,width:"100%","text-align":"left","border-style":"solid","border-color":"grey","border-width":"medium"},clearButton:{width:"100%"},header:{position:"fixed",right:5,top:5,width:"30%","text-align":"center","border-width":"medium"},answerButton:{width:"48%","background-color":"green"},rejectButton:{width:"48%","background-color":"red"},hangupButton:{width:"100%","background-color":"red"},span:{"margin-left":"2%"}}})),I=function(e){var t=e.nexmoApp,n=e.events,a=e.setEvents,o=e.incomingCall,l=A();return t.me?r.a.createElement(B,null,r.a.createElement(x.a,{variant:"h4",gutterBottom:!0},t.me?"Hello ".concat(t.me.application.me.name):r.a.createElement(f.b,{to:"/"},"Login")),o&&"answered"!==o.status?r.a.createElement("div",{className:l.header},r.a.createElement(y.a,{onClick:function(){return o.answer()},className:l.answerButton},"Answer Call"),r.a.createElement("span",{className:l.span}),r.a.createElement(y.a,{onClick:function(){return o.reject()},className:l.rejectButton},"Reject Call")):r.a.createElement("div",null),o&&"answered"===o.status?r.a.createElement("div",{className:l.header},r.a.createElement(y.a,{onClick:function(){return o.hangUp()},className:l.hangupButton},"Hangup Call")):r.a.createElement("div",null),n.map((function(e){var t,n,a,o,c,i,s;return r.a.createElement(k.a,{key:e.id+e.cid},r.a.createElement(w.a,{expandIcon:r.a.createElement(O.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(x.a,{className:l.heading},e.type),r.a.createElement(x.a,{className:l.secondaryHeading},"From:"," ",null===e||void 0===e||null===(t=e._embedded)||void 0===t||null===(n=t.from_member)||void 0===n?void 0:n.id),r.a.createElement(j.a,{orientation:"vertical",flexItem:!0}),r.a.createElement(x.a,{className:l.secondaryHeading},"Display name:"," ",null!==(a=null===e||void 0===e||null===(o=e._embedded)||void 0===o||null===(c=o.from_user)||void 0===c?void 0:c.display_name)&&void 0!==a?a:null===e||void 0===e||null===(i=e._embedded)||void 0===i||null===(s=i.from_user)||void 0===s?void 0:s.name)),r.a.createElement(C.a,null,r.a.createElement(x.a,null,"Body: ".concat(JSON.stringify(e))," ")))})),r.a.createElement("div",{className:l.footer},r.a.createElement(y.a,{onClick:function(){return a([])},className:l.clearButton},"Clear Events"))):r.a.createElement(g.a,{to:"/"})},S=n(235),_=n(237),J=n(231),H=n(239),L=n(213),P=n(236),R=n(125),z=n.n(R),T=Object(E.a)((function(e){return{alignItemsAndJustifyContent:{display:"flex","flex-direction":"column",alignItems:"center",justifyContent:"center","margin-top":"-78px",height:"100vh"},linearProgress:{height:"5px",width:"200px",top:"50%",left:"50%",position:"absolute","margin-left":"-100px"},root:{gridColumn:2,backgroundColor:e.palette.background.paper},sentMessageComponent:{"align-self":"flex-end",display:"flex"},box:{display:"flex",height:"100vh","flex-direction":"column","background-color":"#f6f0d791"},link:{"margin-top":"15px",display:"block"},conversations:{overflow:"hidden"},messagesEndDiv:{display:"inline-block",float:"left"},username:{padding:"5px 7px"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},topnav:{"background-color":"#333",overflow:"hidden"},navItem:{float:"left",color:"#f2f2f2","text-align":"center",padding:"14px 16px","text-decoration":"none","font-size":"17px"}}}));var D,M=function(e){var t=e.nexmoApp,n=e.setNexmoApp,a=e.setIncomingCall,l=T(),c=Object(o.useState)(!1),i=Object(m.a)(c,2),s=i[0],u=i[1],d=Object(o.useState)(""),p=Object(m.a)(d,2),f=p[0],v=p[1],h=function(e){e.on("member:call",(function(t,n){a(n),function(e,t){var n=t.conversation;n.on("member:left",n.id,(function(t,o){t.userId===e.me.id&&(a(void 0),n.releaseGroup(n.id))}))}(e,n)}))};return t.me?r.a.createElement(g.a,{to:"/events"}):r.a.createElement(S.a,null,s?null:r.a.createElement(_.a,{className:l.alignItemsAndJustifyContent},r.a.createElement("h1",null,"Please, Login"),r.a.createElement(J.a,{component:"form",className:l.root},r.a.createElement(H.a,{className:l.input,placeholder:"Login Token",inputProps:{"aria-label":"login token"},onChange:function(e){v(e.target.value)}}),r.a.createElement(L.a,{color:"primary",type:"submit",className:l.iconButton,"aria-label":"directions",onClick:function(){u(!0),t.login(f).then((function(e){u(!1),window.nexmoApp=e,n(e),h(e)}))}},r.a.createElement(z.a,null)))),s?r.a.createElement(_.a,{className:l.alignItemsAndJustifyContent},r.a.createElement(P.a,{className:l.linearProgress})):null)},W=(n(209),v.a.div(D||(D=Object(p.a)(["\n  height: 100vh;\n"]))));var F=function(){var e=Object(o.useState)(b),t=Object(m.a)(e,2),n=t[0],a=t[1],l=Object(o.useState)([]),c=Object(m.a)(l,2),s=c[0],p=c[1],v=Object(o.useState)(void 0),h=Object(m.a)(v,2),E=h[0],x=h[1],y=function(e){var t=Object(o.useState)(null),n=Object(m.a)(t,2),a=n[0],r=n[1];return Object(o.useEffect)((function(){var t,n;(null===e||void 0===e||null===(t=e.session)||void 0===t||null===(n=t.connection)||void 0===n?void 0:n.io)&&e.session.connection.io.on("packet",function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2===t.type){e.next=2;break}return e.abrupt("return");case 2:if("echo"!==t.data[0]){e.next=4;break}return e.abrupt("return");case 4:(n=t.data[1]).type=t.data[0],r(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),a}(n);return Object(o.useEffect)((function(){var e;(e=y)&&p((function(t){return[].concat(Object(i.a)(t),[e])}))}),[y]),r.a.createElement(f.a,null,r.a.createElement(W,null,r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/login"},r.a.createElement(M,{nexmoApp:n,setNexmoApp:a,setIncomingCall:x})),r.a.createElement(g.b,{path:"/events"},r.a.createElement(I,{nexmoApp:n,events:s,setEvents:p,incomingCall:E})),r.a.createElement(g.b,{path:"/"},r.a.createElement(M,{nexmoApp:n,setNexmoApp:a,setIncomingCall:x})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[135,1,2]]]);
//# sourceMappingURL=main.844443a9.chunk.js.map